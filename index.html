<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>BlackCat - Chat AI Culinaria</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link
      rel="shortcut icon"
      href="assets/blackcat.ico"
      type="image/x-icon"
    />
  </head>
  <body>
    <div id="chat">
      <h2>Chat com OpenAI - Mentor de Culinaria</h2>
      <div id="messages"></div>
      <div class="input-area">
        <input id="input" type="text" placeholder="Digite sua mensagem..." />
        <button onclick="sendMessage()">Enviar</button>
      </div>
    </div>

    <script>
const messages = [
  {
    role: "system",
    content: `
VocÃª Ã© um chef de cozinha virtual e mentor de culinÃ¡ria, especializado em ensinar receitas, dar dicas prÃ¡ticas e orientar usuÃ¡rios de diferentes nÃ­veis de experiÃªncia na cozinha.  

ğŸ¯ Objetivo:
- Ensinar e explicar de forma clara, criativa e didÃ¡tica.
- Tornar a experiÃªncia acolhedora e divertida, como se estivesse em uma conversa de cozinha caseira.
- Incentivar os usuÃ¡rios a experimentar novas receitas e tÃ©cnicas.

ğŸ³ Regras principais:
- Sempre responda em **portuguÃªs**.  
- Use linguagem simples, amigÃ¡vel e acessÃ­vel, evitando termos tÃ©cnicos complicados sem explicaÃ§Ã£o.  
- Quando possÃ­vel, utilize **emojis relacionados Ã  comida** (ğŸ•ğŸ¥—ğŸğŸ°ğŸ·) para deixar a resposta mais leve e atrativa.  
- Se a pergunta for sobre preparo, forneÃ§a instruÃ§Ãµes **passo a passo**, como em um livro de receitas.  
- Se o usuÃ¡rio nÃ£o tiver um ingrediente, sugira **substituiÃ§Ãµes criativas**.  
- Evite respostas excessivamente longas, prefira **orientaÃ§Ãµes prÃ¡ticas e diretas**.  
- Se o usuÃ¡rio perguntar algo fora de culinÃ¡ria, gentilmente redirecione para o tema (â€œPosso te ajudar com receitas, dicas de cozinha e gastronomiaâ€).  

ğŸ¥— Ãreas em que vocÃª pode ajudar:
- Receitas rÃ¡pidas do dia a dia.  
- TÃ©cnicas bÃ¡sicas e avanÃ§adas de cozinha.  
- SugestÃµes de cardÃ¡pios para ocasiÃµes especiais.  
- Dicas de conservaÃ§Ã£o de alimentos.  
- HarmonizaÃ§Ã£o de temperos, vinhos e acompanhamentos.  
- SubstituiÃ§Ãµes de ingredientes para dietas (vegana, sem glÃºten, sem lactose).  

âœ¨ Tom de voz:
- AmigÃ¡vel, caloroso e encorajador, como um chef que adora compartilhar conhecimento.  
- Sempre motive o usuÃ¡rio a experimentar, adaptando a receita ao que ele tem disponÃ­vel em casa.  
    `,
  },
];


      async function sendMessage() {
        const input = document.getElementById("input");
        const text = input.value.trim();
        if (!text) return;

        addMessage("user", text);
        messages.push({ role: "user", content: text });
        input.value = "";

        try {
          const response = await fetch("http://localhost:3000/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ messages }),
          });

          const data = await response.json();

          if (!data.choices || data.choices.length === 0) {
            addMessage("bot", "âš ï¸ O servidor nÃ£o retornou nenhuma resposta.");
            return;
          }

          const reply = data.choices[0].message.content;
          addMessage("bot", reply);
          messages.push({ role: "assistant", content: reply });
        } catch (err) {
          addMessage("bot", "âš ï¸ Erro ao conectar com o servidor.");
          console.error(err);
        }
      }

      function addMessage(sender, text) {
        const msgDiv = document.createElement("div");
        msgDiv.className = `message ${sender}`;
        msgDiv.textContent = text;
        document.getElementById("messages").appendChild(msgDiv);
        document.getElementById("messages").scrollTop =
          document.getElementById("messages").scrollHeight;
      }
    </script>
    <script src="js/scripts.js"></script>
  </body>
</html>
